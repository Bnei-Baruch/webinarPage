!function(){angular.module("bbWebinar",[]).config(function(e){})}(),function(e){function t(){function e(){return[{title:"Обучение",linkList:[{title:"Форматы обучения",url:"http://kabacademy.com/programm-online/"},{title:"Самостоятельное обучение",url:"http://kabacademy.com/"},{title:"Онлайн курсы",url:"http://kabacademy.com/programm-online/uznat-bolshe-ob-obuchenii-v-mak/"},{title:"Очное обучение",url:"http://kabacademy.com/filialyi/"}]},{title:"",linkList:[{title:"Преподаватели",url:"http://kabacademy.com/nashi-prepodavateli/"},{title:"Программа обучения",url:"http://kabacademy.com/?p=453"},{title:"Сервисы для студентов",url:"http://kabacademy.com/?p=391"},{title:"Учебные материалы",url:"http://kabacademy.com/?p=388"}]},{title:"О нас",linkList:[{title:"Что такое каббала",url:"http://kabacademy.com/nauka-kabbala/"},{title:"Михаэль Лайтман",url:"http://kabacademy.com/about-us/dr-michael-laitman/"},{title:"Каббалисты",url:"http://kabacademy.com/nauka-kabbala/kabbalistyi/"},{title:"Книги",url:"http://www.kbooks.ru/"}]},{title:"Наши сайты",linkList:[{title:"Информационный портал",url:"http://www.kabbalah.info/rus/"},{title:"Блог М.Лайтмана",url:"http://www.laitman.ru/"},{title:"Каббала ТВ",url:"http://www.kab.tv/rus/"},{title:"Зоар ТВ",url:"http://www.zoar.tv/"}]}]}function t(){return[{url:"http://kabacademy.com/programm-online/",title:"Как мы учимся?"},{url:"http://kabacademy.com/filialyi/",title:"Очное обучение"},{url:"http://kabacademy.com/programm-online/uznat-bolshe-ob-obuchenii-v-mak/",title:"On-line обучение"},{url:"http://www.kbooks.ru/katalog/list/120",title:"магазин книг"}]}return{getFooterData:e,getTopNav:t}}e.service("GetDataSVC",t)}(angular.module("bbWebinar")),function(e){function t(e,t,a){function n(){var e={method:"POST",url:"app/config.json"};return a(e)}function i(){if(window._hcwp=window._hcwp||[],window._hcwp.push({widget:"Stream",widget_id:68039}),!("HC_LOAD_INIT"in window)){HC_LOAD_INIT=!0;var e=(navigator.language||navigator.systemLanguage||navigator.userLanguage||"en").substr(0,2).toLowerCase(),t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https":"http")+"://w.hypercomments.com/widget/hc/68039/"+e+"/widget.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a.nextSibling)}}function r(){function a(){e.getPlayerData().then(function(e){var i,r;if(i=e.items[0].id.videoId,youTubePlayer.timeoutId&&clearTimeout(youTubePlayer.timeoutId),youTubePlayer.timeoutId=t(function(e){a()},6e4),youTubePlayer.id!==i){if(youTubePlayer.id)return youTubePlayer.player.stopVideo(),youTubePlayer.player.loadVideoById(i),void(youTubePlayer.id=i);youTubePlayer.id=i,r=n(i),youTubePlayer.player=new YT.Player("player",r)}})}function n(e){var t={height:"390",width:"640",playerVars:{rel:0,fresca_preroll:1,controls:1},events:{onReady:i,onStateChange:r}};"playlist"===e?(t.playerVars.listType="playlist",t.playerVars.list="PL3s9Wy5W7M-NLdc1mNXEk_BtJtsLIaGAQ",t.playerVars.controls="1"):t.videoId=e;var a=angular.element(document.querySelector("#player")).scope();return"playlist"===e?a.$apply(a.main.setLive("false")):a.$apply(a.main.setLive("true",e)),t}function i(e){youTubePlayer.player.playVideo()}function r(e){}window.youTubePlayer={},window.onYouTubeIframeAPIReady=a}return{addHypercomments:i,buildPlayer:r,getConfig:n}}e.service("UtilitiesSVC",t),t.$inject=["YoutubeSVC","$timeout","$http"]}(angular.module("bbWebinar")),function(e){function t(e){function t(t){var a={part:"snippet",playlistId:"PL3s9Wy5W7M-NLdc1mNXEk_BtJtsLIaGAQ",key:"AIzaSyBoMXQDrlRUCQCxv4fjfiyTHXog8OB2Nz0",maxResults:4};t&&(a.pageToken=t);var n={method:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems/",params:a};return e(n)}function a(t){var a={part:"snippet",id:t,key:"AIzaSyBoMXQDrlRUCQCxv4fjfiyTHXog8OB2Nz0"},n={method:"GET",url:"https://www.googleapis.com/youtube/v3/videos/",params:a};return e(n)}function n(){var t="https://www.googleapis.com/youtube/v3/search",a={part:"snippet",eventType:"upcoming",type:"video",order:"date",channelId:"UCAhq4ttjWzWAT4zmPXm0DZw",key:"AIzaSyBoMXQDrlRUCQCxv4fjfiyTHXog8OB2Nz0"};return e.get(t,a).then(function(n){return n.items.length>0?n:(a.eventType="live",e.get(t,a).then(function(e){return 0===e.items.length&&(e.items=[{id:{videoId:"playlist"}}]),e}))})}function i(){var t="https://www.googleapis.com/youtubei/v1/player/live_state",a={alt:"json",key:"AIzaSyBoMXQDrlRUCQCxv4fjfiyTHXog8OB2Nz0"};return e.post(t,a).then(function(n){return n.items.length>0?n:(a.eventType="live",e.get(t,a).then(function(e){return 0===e.items.length&&(e.items=[{id:{videoId:"playlist"}}]),e}))})}function r(){var t="http://devedu.kbb1.com/webinar2/server/youtubeApi.php",a={test:"123"};return e.post(t,a).then(function(e){console.log(e)})}return{getPlayList:t,getVideoById:a,getPlayerData:n,getLiveData:i,test:r}}e.service("YoutubeSVC",t),t.$inject=["$http"]}(angular.module("bbWebinar")),function(e){function t(e){var t=this;return t.navData=e.getFooterData(),t}e.controller("FooterCtrl",t),t.$ingect=["GetDataSVC"]}(angular.module("bbWebinar")),function(e){function t(e,t){function a(a,n){r.isLive="true"===a,t.getConfig().then(function(e){var t=e.data.webinarDate;new Date(t.year,t.month,t.day,t.hour)}),r.isLive?e.getVideoById(n).then(function(e){r.currentClip=e.data.items[0],t.getConfig().then(function(e){var t=e.webinarDate;r.currentClip.startIn=new Date(t.year,t.month,t.day,t.hour)})}):i(null,0,0)}function n(e,t){r.currentClip=e,r.currentClip.$index=r.playList.pageInfo.resultsPerPage*r.pageCounter+t+1,window.youTubePlayer.player.loadVideoById(e.snippet.resourceId.videoId)}function i(t,a){r.pageCounter+=a,e.getPlayList(t).then(function(e){r.playList=e.data,r.currentClip=e.data.items[0],r.currentClip.$index=r.playList.pageInfo.resultsPerPage*r.pageCounter+1})}var r=this;return r.pageCounter=0,r.currentClip={},r.playList=[],r.loadPage=i,r.openClip=n,r.setLive=a,r.isLive=!1,r.addHypercomments=t.addHypercomments(),r}new Date(2016,0,24,17);e.controller("MainCtrl",t),t.$ingect=["YoutubeSVC","UtilitiesSVC"]}(angular.module("bbWebinar")),function(e){function t(e){var t=this;return t.navList=e.getTopNav(),t}e.controller("NavCtrl",t),t.$ingect=["GetDataSVC"]}(angular.module("bbWebinar")),function(e,t,a,n,i){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(a)[0],o=t.createElement(a),l="dataLayer"!=n?"&l="+n:"";o.async=!0,o.src="//www.googletagmanager.com/gtm.js?id="+i+l,r.parentNode.insertBefore(o,r)}(window,document,"script","dataLayer","GTM-5WGLDJ"),function(){var e="ygZrmdRfik",t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//code.jivosite.com/script/widget/"+e;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}(),function(e){window.fnames=new Array,window.ftypes=new Array,fnames[0]="EMAIL",ftypes[0]="email",fnames[1]="FNAME",ftypes[1]="text",fnames[3]="MMERGE3",ftypes[3]="text"}(jQuery),function(e){window.youTubePlayer={},window.onYouTubeIframeAPIReady=function(){function t(e){var t,n;if(t=e.items[0].id.videoId,youTubePlayer.timeoutId&&clearTimeout(youTubePlayer.timeoutId),youTubePlayer.timeoutId=setTimeout(function(e){onYouTubeIframeAPIReady()},6e4),youTubePlayer.id!==t){if(youTubePlayer.id)return youTubePlayer.player.stopVideo(),youTubePlayer.player.loadVideoById(t),void(youTubePlayer.id=t);youTubePlayer.id=t,n=a(t),youTubePlayer.player=new YT.Player("player",n)}}function a(e){var t={height:"390",width:"640",playerVars:{rel:0,fresca_preroll:1,controls:1},events:{onReady:n,onStateChange:i}};"playlist"===e?(t.playerVars.listType="playlist",t.playerVars.list="PL3s9Wy5W7M-NLdc1mNXEk_BtJtsLIaGAQ",t.playerVars.controls="1"):t.videoId=e;var a=angular.element(document.querySelector("#player")).scope();return"playlist"===e?a.$apply(a.main.setLive("false")):a.$apply(a.main.setLive("true",e)),t}function n(e){}function i(e){}var r="https://www.googleapis.com/youtube/v3/search",o={part:"snippet",eventType:"upcoming",type:"video",order:"date",channelId:"UCAhq4ttjWzWAT4zmPXm0DZw",key:"AIzaSyBoMXQDrlRUCQCxv4fjfiyTHXog8OB2Nz0"};e.get(r,o).done(function(a){0==a.items.length?(o.eventType="live",e.get(r,o).done(function(e){0==e.items.length&&(e.items=[{id:{videoId:"playlist"}}]),t(e)})):t(a)})}}(jQuery);